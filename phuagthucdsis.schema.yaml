# Rime schema
# encoding: utf-8

schema:
  schema_id: phuagthucdsis
  name: ä»¿ç¾…é¦¬é€šå­—æ–¹æ¡ˆ
  version: "2022.02.7"
  author:
    - GwaiSyen <domgleisyen@foxmail.com>
  description: |
    åŸºäºå»£éŸ»éŸ³ç³»ï¼Œåƒæ”·ä¸Šå¤æ“¬éŸ³
    éŸ»å…¸ç¶²Â·å»£éŸ» http://ytenx.org/kyonh/
    https://zhuanlan.zhihu.com/p/388867479ä»¿ç¾…é¦¬é€šå­—æ–¹æ¡ˆ
  dependencies:
    - luna_pinyin
    - unicode
    - zyenpheng

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: half_shape
    states: [ å…¨è§’, åŠè§’ ]
  - name: simplification
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@pinyin
    - affix_segmentor@zyenpheng
    - affix_segmentor@unicode
    - punct_segmentor
    - fallback_segmentor
  translators:
    - echo_translator
    - punct_translator
    - script_translator
    - script_translator@pinyin
    - script_translator@zyenpheng
    - table_translator@unicode
    - encode_commit_history
  filters:
    - simplifier
    - uniquifier
    - cjk_minifier
    - reverse_lookup_filter@gepxuuz

speller:
  alphabet: 'zyxwvutsrqponmlkjihgfedcbaABCDEFGHIJKLMNOPQRSTUVWXYZ;'
  delimiter: "'"
  algebra:




    - abbrev/([A-Z])[jx]([aeiouÉ™])/$1i$2/ #i=jxi
    - abbrev/([A-Z])[yw]([aeiouÉ™])/$1u$2/ #i=jxi
    - abbrev/([A-Z][ev]?É™)([xhs])$/$1j$2/ #É™ã¢
    - abbrev/([A-Z][ev]?)[au]([jlr])/$1a$2/ #aj
    - abbrev/([A-Z][jx])[ae]([xhsjlr])/$1e$2/ #e-j
    - abbrev/([A-Z][yw])[aeu]([xhsjlr])/$1e$2/ #e-j
    - abbrev/([A-Z][jx])[iÉ™]([xhsjlr])/$1i$2/ #i-j
    - abbrev/([A-Z][yw])[ioÉ™]([xhsjlr])/$1i$2/ #i-j
    - abbrev/([A-Z][e]?)[aou](v[xhs])/$1a$2/ #av
    - abbrev/([A-Z][er]?)[o](v[xhs])/$1u$2/ #u
    - abbrev/([A-Z][r])[aeo](v[xhs])/$1a$2/ #rav
    - abbrev/([A-Z][e]?)[eÉ™](v[xhs])/$1e$2/ #ev
    - abbrev/([A-Z][jx])[aeu](v[xhs])/$1e$2/ #ev
    - abbrev/([A-Z][jxi]?)[É™o](v[xhs])/$1É™$2/ #É™v
    - abbrev/([A-Z][e]?)[ao]([vwy])/$1a$2/ #av
    - abbrev/([A-Z][er]?)[o]([vwy])/$1u$2/ #u
    - abbrev/([A-Z][r])[aeo]([vwy])/$1a$2/ #rav
    - abbrev/([A-Z][e]?)[euÉ™]([vwy])/$1e$2/ #ev
    - abbrev/([A-Z][jx])[aeu]([vwy])/$1e$2/ #ev
    - abbrev/([A-Z][jxi]?)[É™o]([vwy])/$1É™$2/ #É™v
    - abbrev/[au]([ndzt])/a$1/ #an
    - abbrev/[aÉ™]([ndzt])/e$1/ #
    - abbrev/([A-Z][jyxw])[aeu]([ndzt])/$1e$2/  #ien
    - abbrev/([A-Z][jyxw])[ioÉ™]([ndzt])/$1i$2/  #iin
    - abbrev/([A-Z][rf])[eiÉ™o]([ndzt])/$1e$2/  #ren
    - abbrev/([A-Z])[É™ou]([mbfp])/$1o$2/ #É™m
    - abbrev/([A-Z][jx])[aeu]([mbfp])/$1e$2/  #iem
    - abbrev/([A-Z][jx])[ioÉ™]([mbfp])/$1i$2/  #iim
    - abbrev/([A-Z][r])[uo]([cgqk])/$1u$2/  #ruÅ‹
    - abbrev/([A-Z][r])[uo]([cgqk])/$1o$2/
    - abbrev/([A-Z][j])[ae]([cgqk])/$1e$2/  #iek
    - abbrev/([A-Z])[au]v([cgqk])/$1a$2/  #avk
    - abbrev/([A-Z][ijx]?)[aeu]v([cgqk])/$1a$2/ #iavk
    - abbrev/([A-Z][ev]?)[eiÉ™]v([cgqk])/$1e$2/ #evk
    - abbrev/([A-Z][r])[eoiÉ™]v([cgqk])/$1e$2/ #revk
    - abbrev/([A-Z][e]?)[u]v([cgqk])/$1u$2/ #uvk
    - abbrev/([A-Z][r])[aeu]v([cgqk])/$1u$2/ #ruvk
    - abbrev/([A-Z][r])[ouÉ™]v([cgqk])/$1u$2/ #ovk
    - abbrev/([A-Z][ijx])[É™]v([cgqk])/$1É™$2/ #iÉ™vk

    - abbrev/([A-Z][evjxywrf]i)(c)/$1n/  #iÅ‹
    - abbrev/([A-Z][evjxywrf]i)(g)/$1d/
    - abbrev/([A-Z][evjxywrf]i)(q)/$1z/
    - abbrev/([A-Z][evjxywrf]i)(k)/$1t/


    - derive/([A-Z])([ev]?[au])j/$1$2/ #aj
    - derive/([A-Z][ev]?[au])j$/$1x/ #aj
    - derive/([A-Z][ev]?[au])l$/$1h/ #aj
    - derive/([A-Z][ev]?[au])r$/$1s/ #aj
    - derive/(\w)v([o][jlrndzt])/$1$2/ #on vo
    - derive/(\w)vÉ™([ndzt])/$1o$2/ #on vo

    - derive/([A-Z][jxi])[É™oi]v([xhs])/$1u$2/ #å°¤å¹½ v u 
    - derive/([A-Z])[ij][É™o](v)/$1i$2/ #iu iÉ™v
    - derive/([A-Z]u)[É™o]([ndzt])/$1$2/ #iun iÉ™n

    - derive/([A-Z])v(iÉ™v)/$1$2/ #viÉ™åˆå£ä¹‹ v u
    - derive/([A-Z])(viÉ™)v/$1$2/
    - derive/([A-Z])[ji]É™(\w)/$1i$2/ #iÉ™
    - derive/([A-Z])[yu]É™(\w)/$1u$2/ #uÉ™
    - derive/([A-Z])viÉ™([cgqk])/$1u$2/ #è·viÉ™Å‹
    - derive/([A-Z])xÉ™([cgqk])/$1ri$2/ #è·iÉ™Å‹ iÅ‹ -v
    - derive/([A-Z]v?)[ij]É™([cgqk])/$1i$2/


    - derive/([A-Z])y(\w)/$1vj$2/ #ä»‹éŸ³
    - derive/([A-Z])f(\w)/$1vr$2/
    - derive/([A-Z])x(\w)/$1rj$2/
    - derive/([A-Z])w(\w)/$1ry$2/
    - derive/([A-Z])w(\w)/$1vrj$2/
    - derive/([A-Z])e([aoÉ™])/$1$2/ #ä¸€ç­‰
    - derive/([A-Z])e([eu])/$1$2/ #å››ç­‰
    - derive/([A-Z])r([aeiouÉ™])/$1a$2/ #äºŒç­‰
    - derive/([A-Z])f([aeiouÉ™])/$1o$2/ #äºŒç­‰

    - derive/([PBM]|PH)v([aeiÉ™])/$1$2/ #å¹«çµ„
    - derive/([PBM]|PH)u([aeiÉ™])/$1i$2/ 
    - derive/([PBM]|PH)y([aeiÉ™])/$1j$2/ 
    - derive/([PBM]|PH)w([aeiÉ™])/$1x$2/ 
    - derive/(XQ)v([aeoiÉ™])/$1$2/ #é›²æ¯
    - derive/(XQ)u([aeoiÉ™])/$1i$2/
    - derive/(XQ)w([aeoiÉ™])/$1x$2/

    - derive/ov/eu/ #çš‹
    - derive/É™(u)/$1/ #ä¾¯



    - derive/Jj/j/



    - erase/(^|')[hg][jy]/
    - erase/(^|')H[SZ][jy]/
    - derive/(^|')SC([jy])(?!$)/$1h$2/	#æ›¸
    - derive/(^|')ZC([jy])(?!$)/$1g$2/ #èˆ¹
    - derive/(^|')SZ(?!$)/x/ #é‚ª

    - derive/[FRQ]//
    - derive/([KGTDJN])C/$1/
    - derive/((^|')([PBMTDNLKGSJ])(?!$))/\L$1\L/
    - derive/((^|')(([PTK]|T[SZ]|RT)H)(?!$))/\L$1\L/
    - derive/(^|')T[SZ](?!$)/ts/
    - derive/(^|')T[SZ]H(?!$)/tsh/
    - derive/(^|')D[ZS](?!$)/dz/
    - derive/(^|')D[ZS](?!$)/z/
    - derive/(^|')(SZ|ZS)(?!$)/sz/
    - derive/((^|')([SZ][SC]))(?!$)/\L$1\L/
    - derive/(^|')SS(?!$)/s/  
    - derive/(^|')([XH]Z|HG|ZX)(?!$)/g/
    - derive/(^|')(JX|XQ)(?!$)/x/
    - derive/(^|')NG(?!$)/ng/
    - derive/(^|')([XH]S|SX)(?!$)/h/
    # - derive/(^|')([XH]S|SX)(?!$)/hs/
    - derive/(^|')([XH]Z|XQ|HG|ZX)(?!$)/E/
    - derive/(^|')(ZC)(?!$)/E/
    - derive/(^|')HQ(?!$)/hq/
    - derive/(^|')HQ(?!$)/A/

    - derive/(^|')([S]Z)(?!$)/$1\L$2/

    - derive/(^|')PH(?!$)/f/
    - derive/(^|')T[RC]?H(?!$)/r/
    - derive/(^|')T[SZ]H(?!$)/v/
    - derive/(^|')T[SZ](?!$)/c/
    - derive/(^|')T[SZ]H(?!$)/ch/
    - derive/(^|')KQ?H(?!$)/y/
    - derive/(^|')NGQ?(?!$)/w/
    - derive/(^|')HQ(?!$)/q/

    - derive/(\w[sry])[ptk]$/$1/
    # - derive/([aeiouÉ™])v([k])$/$1$2/
    - derive/([aeiouÉ™])x$/$1/
    - abbrev/([aeiouÉ™])j$/$1/
    - derive/(\w)vx$/$1v/
    - derive/(\w)vh$/$1w/
    - derive/(\w)vs$/$1y/
    - derive/(\w)h$/$1A/
    - abbrev/(\w)[rs]([ptk])/$/$1r/ # éŸ»å°¾-è²èª¿
    - abbrev/(\w)(r([ptk])?)$/$1s/
    - abbrev/([A-Z]v?É™)x$/$1j/
    - abbrev/([A-Z]v?É™)h$/$1l/
    - abbrev/([A-Z]v?É™)s$/$1r/
    - abbrev/(\w)j$/$1/
    - abbrev/(\w)l$/$1h/
    - abbrev/(\w)r$/$1s/


###########
# éˆéŸ³ ([PTK]H?|[BDG]|F([PB]|PH)|H[SZGQ]|[SZ]X|XQ|JX|[M]F?|NG)
# éŠ³éŸ³ ([TDNSZKG][C]|[TDN][R]|[TDSNLJ]|TH|[TK]H[CR]||SZ|[TD][SZ]H?|[SZ]S)
# éŠ³éŸ³ (([TK]H?|[NSZDG][C])|([T]H?|[DN][R])|([TDSNLJ]|SZ|TH)|([T][SZ]H?|[D][SZ])|[SZ]S)


  







  


  

    - abbrev/^([a-z]).+$/$1/ #é¦–å­—æ¯

    - derive/É™/eo/ #EOÉ™ eo
    - derive/É™/;/ #EOÉ™ eo


translator:
  dictionary: phuagthucdsis
  spelling_hints: 8
  prism: phuagthucdsis
  preedit_format:
    - xform/;/É™/
    - xform/([PTKQ])H/\L$1Ê°/
    - xform/SQ/Ï‡/
    - xform/ZQ/Ê/
    - xform/NG/Å‹/
    - xform/NQ/É´/
    - xform/A/Ê”/
    - xform/O/Ë¤/
    - xform/V/Ê·/
    - xform/Y/É¥/
    - xform/HQ/Ê”/
    - xform/eo/É™/
# # # # # 
gepxuuz:
  dictionary: phuagthucdsis
  overwrite_comment: false
  tag: [pinyin,zyenpheng]
  preedit_format:

pinyin:
  dictionary: luna_pinyin
  prefix: "i"
  # suffix: ";"
  tips: ã€”pinyinã€•
  tag: pinyin
  # closing_tips:
  # # contextual_suggestions: #å„ªåŒ–
 
zyenpheng:
  dictionary: zyenpheng
  prefix: "a"
  suffix: ";"
  tips: ã€”zyenphengã€•
  # contextual_suggestions: #å„ªåŒ–
  tag: zyenpheng


unicode:
  dictionary: unicode
  tag: unicode
  prefix: "u"
  # suffix: ";"
  tips: ã€”unicodeã€•

punctuator:
  import_preset: symbols

  half_shape:
  
    "`": ["`", "Â·"]
    "~": ["~", "~"]
    "!": [ "!","ï¼"]
    "@": ["@", "ï¼ ", "â˜¯"]
    "#": ["#", "ï¼ƒ", "âŒ˜"]
    "$": ["$", "ï¿¥", "â‚¬", "Â£", "Â¥", "Â¢", "Â¤"]
    "%": ["%", "ï¼…", "Â°", "â„ƒ"]
    "^": ["^", , "âŠ•", "â€¦â€¦", "â†‘"]
    "&": ["&", "âˆ©","âˆ§", "ï¼†"]
    "*": ["*", "Ã—", "âˆ™", "âˆ", "âˆ", "âˆ˜", "ãƒ»", "âŠ™", "â€»", "â‚", "ï¼Š"]
    "(": ["(", "ï¼ˆ"]
    ")": [")", "ï¼‰"]
    "-": ["-", "âˆ’", "âˆ–", "ï¼"]
    "_": ["_", "âˆ–", "â€”â€”"]
    "=": ["=", "ï¼","â‰œ",  "â‰", "â‰”", "â‰”", "â‰Ÿ", "â‰ ", "â‰¡", "â‰¢", "â‰£"]
    "+": ["+", "âˆ«", "âˆ‘", "â¨‹", "ï¼‹"]
    "[": ["[", "ã€Œ", "ã€", "ã€”", "ï¼»" ]
    "]": ["]", "ã€", "ã€‘", "ã€•", "ï¼½"]
    "{": ["{", "ã€", "ã€–", "ï½›"]
    "}": ["}", "ã€", "ã€—", "ï½"]
    ":": [":", "ï¼š"]
    ";": [";", "ï¼›"]

    "|": ["|", "âˆª"," âˆ¨", "Â¦", "Â§", "ï½œ"]
    "\\": ["\\", "ã€", "ï¼¼", "ã€€", "âˆ–"]
    "\'": ["\'", "â€˜", "â€™"] # ' 
    "\"": ["\"", "â€œ", "â€"] # '"
    "<": ["<", "ã€Š", "ã€ˆ", "Â«", "â€¹", "â†", "âˆˆ", "âŠ†", "âŠŠ", "âŠˆ"]
    ">": [">", "ã€‹", "ã€‰", "Â»", "â€º", "â†’", "âˆ‹", "âŠ‡", "âŠ‹", "âŠ‰"]
    ",": ["," ,  "ï¼Œ"]
    ".": ["." , "ã€‚" ,  "ï¼"]
    "?": ["?" ,"âˆ" , "ï¼Ÿ"]
    "/": ["/", "ã€",  "âˆ•", "Ã·", "âˆ‚", "ï¼"]
  symbols:
    "vs": [ "ï¸€", "ï¸", "ï¸‚", "ï¸ƒ", "ï¸„", "ï¸…", "ï¸†", "ï¸‡", "ï¸ˆ", "ï¸‰", "ï¸Š", "ï¸‹", "ï¸Œ", "ï¸", "ï¸", "ï¸",]
    "/ivd": [ "ó „€", "ó „", "ó „‚", "ó „ƒ", "ó „„", "ó „…", "ó „†", "ó „‡", "ó „ˆ", "ó „‰", "ó „Š", "ó „‹", "ó „Œ", "ó „", "ó „", "ó „", "ó „", "ó „‘", "ó „’", "ó „“", "ó „”", "ó „•", "ó „–", "ó „—", "ó „˜", "ó „™", "ó „š", "ó „›", "ó „œ", "ó „", "ó „", "ó „Ÿ", "ó „ ", "ó „¡", "ó „¢", "ó „£", "ó „¤", "ó „¥", "ó „¦", "ó „§", "ó „¨", "ó „©", "ó „ª", "ó „«", "ó „¬", "ó „­", "ó „®", "ó „¯", "ó „°", "ó „±", "ó „²", "ó „³", "ó „´", "ó „µ", "ó „¶", "ó „·", "ó „¸", "ó „¹", "ó „º", "ó „»", "ó „¼", "ó „½", "ó „¾", "ó „¿", "ó …€", "ó …", "ó …‚", "ó …ƒ", "ó …„", "ó ……", "ó …†", "ó …‡", "ó …ˆ", "ó …‰", "ó …Š", "ó …‹", "ó …Œ", "ó …", "ó …", "ó …", "ó …", "ó …‘", "ó …’", "ó …“", "ó …”", "ó …•", "ó …–", "ó …—", "ó …˜", "ó …™", "ó …š", "ó …›", "ó …œ", "ó …", "ó …", "ó …Ÿ", "ó … ", "ó …¡", "ó …¢", "ó …£", "ó …¤", "ó …¥", "ó …¦", "ó …§", "ó …¨", "ó …©", "ó …ª", "ó …«", "ó …¬", "ó …­", "ó …®", "ó …¯", "ó …°", "ó …±", "ó …²", "ó …³", "ó …´", "ó …µ", "ó …¶", "ó …·", "ó …¸", "ó …¹", "ó …º", "ó …»", "ó …¼", "ó …½", "ó …¾", "ó …¿", "ó †€", "ó †", "ó †‚", "ó †ƒ", "ó †„", "ó †…", "ó ††", "ó †‡", "ó †ˆ", "ó †‰", "ó †Š", "ó †‹", "ó †Œ", "ó †", "ó †", "ó †", "ó †", "ó †‘", "ó †’", "ó †“", "ó †”", "ó †•", "ó †–", "ó †—", "ó †˜", "ó †™", "ó †š", "ó †›", "ó †œ", "ó †", "ó †", "ó †Ÿ", "ó † ", "ó †¡", "ó †¢", "ó †£", "ó †¤", "ó †¥", "ó †¦", "ó †§", "ó †¨", "ó †©", "ó †ª", "ó †«", "ó †¬", "ó †­", "ó †®", "ó †¯", "ó †°", "ó †±", "ó †²", "ó †³", "ó †´", "ó †µ", "ó †¶", "ó †·", "ó †¸", "ó †¹", "ó †º", "ó †»", "ó †¼", "ó †½", "ó †¾", "ó †¿", "ó ‡€", "ó ‡", "ó ‡‚", "ó ‡ƒ", "ó ‡„", "ó ‡…", "ó ‡†", "ó ‡‡", "ó ‡ˆ", "ó ‡‰", "ó ‡Š", "ó ‡‹", "ó ‡Œ", "ó ‡", "ó ‡", "ó ‡", "ó ‡", "ó ‡‘", "ó ‡’", "ó ‡“", "ó ‡”", "ó ‡•", "ó ‡–", "ó ‡—", "ó ‡˜", "ó ‡™", "ó ‡š", "ó ‡›", "ó ‡œ", "ó ‡", "ó ‡", "ó ‡Ÿ", "ó ‡ ", "ó ‡¡", "ó ‡¢", "ó ‡£", "ó ‡¤", "ó ‡¥", "ó ‡¦", "ó ‡§", "ó ‡¨", "ó ‡©", "ó ‡ª", "ó ‡«", "ó ‡¬", "ó ‡­", "ó ‡®", "ó ‡¯",]

    "/swus": ["âˆ",  "â„µ", "â„¶", "â„·", "â„¸",  "âˆ›",  "âˆœ" ]
    "/dzjop": ["âˆ…",  "âŠ•",  "âˆ–",  "âˆ©", "âˆª", "âˆˆ", "âˆ‰",  "âˆŠ",  "âˆ‹",  "âˆŒ", "âˆ",  "âŠ†",  "âŠ‡",  "âŠˆ",  "âŠ‰",  "âŠŠ",  "âŠ‹",  "âŠ‚",  "âŠƒ",  "âŠ„",  "âŠ„"]
    "/tsjek": ["âˆ«",  "âˆ¬",  "âˆ­",  "âˆ®",  "âˆ¯",  "âˆ°",  "âˆ±",  "âˆ²",  "âˆ³"]
    "/muj": ["âˆ•", "Ã·", "âˆ‚",  "âˆ«",  "âˆ¬",  "âˆ­",  "âˆ®",  "âˆ¯",  "âˆ°",  "âˆ±",  "âˆ²",  "âˆ³",  "+",  "âˆ’",  "Ã—",  "Ã·", "âˆ", "âˆ‘"]
    "/muj": ["âˆ‚",  "ğœ•",  "ğ››"]
    "/svud": ["+",  "âˆ’",  "Ã—",  "Ã·",  "âˆ•",  "âˆš",  "â†‘", "âˆ", "âˆ‘"]
    "/logic": [ "âˆ€", "âˆƒ",  "âˆ„", "Â¬",   "âˆ§", " âˆ¨", "âŠ•"]

    "/deow": ["Ë¥",  "Ë¦",  "Ë§",  "Ë¨",  "Ë©",  "|",  "â€–",  "â†—",  "â†˜",  "êœ›",  "êœœ"]
    "/scjec": ["Ë",  "Ë‘",  "Ì†",  "Ëˆ",  "ËŒ",  ".",  "â€¿"]
  # full_shape:
key_binder:
  import_preset: default
  bindings:
ascii_composer:
    good_old_caps_lock: true
    switch_key: {Caps_Lock: noop, Control_L: noop, Control_R: noop, Eisu_toggle: clear, Shift_L: commit_code, Shift_R: commit_code}

recognizer:
  import_preset: default
  patterns:
    pinyin: "^i[a-z]*'?$"
    email: "^[a-z][-_.0-9a-z]*@.*$"
    punct: "/[a-zA-Z]*$" #é…åˆsymbols.yamlä¸­çš„ç‰¹æ®Šå­—ç¬¦è¼¸å…¥
    unicode: "^u[0-9abcde]*;?$"
    zyenpheng: "^a[a-z]*;?$"
